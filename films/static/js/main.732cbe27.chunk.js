(this.webpackJsonpfilms=this.webpackJsonpfilms||[]).push([[0],{31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(22),s=a.n(r),c=(a(31),a(14)),l=a(5),o=a(6),d=a(8),u=a(7),m=(a(32),a(33),a(12)),h=a(0),j=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={random:Math.floor(Math.random()*e.props.allFilms.length)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"mainHeader",children:Object(h.jsxs)("div",{className:"logo",children:[Object(h.jsx)("div",{children:Object(h.jsx)(m.b,{onClick:function(){return e.setState({random:Math.floor(Math.random()*e.props.allFilms.length)})},className:"randomMovie",to:"/".concat(this.state.random),children:"\u0420\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u043c"})}),Object(h.jsx)("div",{className:"logotype",children:Object(h.jsx)(m.b,{to:"/",children:"Filmex"})}),Object(h.jsxs)("div",{className:"LogOrReg",children:[Object(h.jsx)(m.b,{to:"/reg",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(h.jsx)(m.b,{to:"/join",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}}]),a}(i.a.Component),p=(a(40),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={searchItem:null},e.changeSearchState=function(t){""===t.target.value&&(e.setState({searchItem:""}),e.props.searchHandler(e.state.searchItem)),e.setState({searchItem:t})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"SearchFilmMain",children:[Object(h.jsx)("input",{onInput:function(t){return e.changeSearchState(t)},placeholder:"Type here...",className:"SearchInput"}),Object(h.jsx)("button",{onClick:function(){return e.props.searchHandler(e.state.searchItem)},className:"SearchButton",children:"Search"})]})}}]),a}(i.a.Component)),b=(a(41),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).indexOfArray=null,e.searchInPosts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return 0===t.length?e.props.renderItems:!1===n?null===a.target.textContent?e.props.renderItems:(e.canIGoInSort=!0,e.props.renderItems.filter((function(e){return e.yearRelease==a.target.value}))):e.props.renderItems.filter((function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1}))},e.returnCards=function(){return e.searchInPosts(e.props.searchFilter,null).map((function(t,a){var n=t.name,i=t.yearRelease,r=t.img;return Object(h.jsxs)("div",{className:"cardContainer",children:[Object(h.jsx)("div",{className:"cardNameContainer",children:Object(h.jsx)(m.b,{className:"cardName",to:"/".concat(a),children:n})}),Object(h.jsx)("img",{className:"cardImg",src:r}),Object(h.jsx)("p",{onClick:function(t){return e.searchInPosts("",t,!1)},className:"cardYear",children:"".concat(i).substring(0,4)})]},a)}))},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"FilmCardsMain",children:this.returnCards()})}}]),a}(i.a.Component)),f=(a(42),a.p+"static/media/free-icon-video-70776.5ddb88fc.svg"),g=a(24),v=(a(55),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).checkLocalStorage=function(){e.props.changeRaiting(e.props.id,localStorage.getItem("raiting-".concat(e.props.id))),document.querySelector("#".concat(localStorage.getItem("raiting-".concat(e.props.id)))).checked=!0},e.calcMiddleRaiting=function(){document.querySelectorAll('input[type="radio"]').forEach((function(t){!0===t.checked&&(e.props.changeRaiting(e.props.id,localStorage.getItem("raiting-".concat(e.props.id))),localStorage.setItem("raiting-".concat(e.props.id),t.getAttribute("id")))}))},e.calcMiddle=function(){return localStorage.getItem("raiting-".concat(e.props.id))?localStorage.getItem("raiting-".concat(e.props.id))[localStorage.getItem("raiting-".concat(e.props.id)).length-1]:0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("raiting-".concat(this.props.id))&&this.checkLocalStorage()}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"rating-area",children:[Object(h.jsx)("input",{onClick:this.calcMiddleRaiting,type:"radio",id:"star-5",name:"rating",value:"5"}),Object(h.jsx)("label",{htmlFor:"star-5",title:"\u041e\u0446\u0435\u043d\u043a\u0430 \xab5\xbb"}),Object(h.jsx)("input",{onClick:this.calcMiddleRaiting,type:"radio",id:"star-4",name:"rating",value:"4"}),Object(h.jsx)("label",{htmlFor:"star-4",title:"\u041e\u0446\u0435\u043d\u043a\u0430 \xab4\xbb"}),Object(h.jsx)("input",{onClick:this.calcMiddleRaiting,type:"radio",id:"star-3",name:"rating",value:"3"}),Object(h.jsx)("label",{htmlFor:"star-3",title:"\u041e\u0446\u0435\u043d\u043a\u0430 \xab3\xbb"}),Object(h.jsx)("input",{onClick:this.calcMiddleRaiting,type:"radio",id:"star-2",name:"rating",value:"2"}),Object(h.jsx)("label",{htmlFor:"star-2",title:"\u041e\u0446\u0435\u043d\u043a\u0430 \xab2\xbb"}),Object(h.jsx)("input",{onClick:this.calcMiddleRaiting,type:"radio",id:"star-1",name:"rating",value:"1"}),Object(h.jsx)("label",{htmlFor:"star-1",title:"\u041e\u0446\u0435\u043d\u043a\u0430 \xab1\xbb"})]}),Object(h.jsxs)("div",{className:"middleRaiting",children:["\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433: ",this.calcMiddle()]})]})}}]),a}(i.a.Component)),O=(a(56),a(57),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).classes=["far","fa-thumbs-up","like"],e.classesForDislike=["far","fa-thumbs-down","dislike"],e.addLikeAndClasses=function(t,a){a.target.nextElementSibling.classList.contains("fa")&&(e.props.addLike(t),a.target.nextElementSibling.classList.add("far"),a.target.nextElementSibling.classList.remove("fa")),a.target.classList.contains("fa")?(a.target.classList.remove("fa"),a.target.classList.add("far"),e.props.addDislike(t)):(e.props.addLike(t),a.target.classList.add("fa"),a.target.classList.remove("far"))},e.addDislikeAndClasses=function(t,a){a.target.previousElementSibling.classList.contains("fa")&&(e.props.addDislike(t),a.target.previousElementSibling.classList.add("far"),a.target.previousElementSibling.classList.remove("fa")),a.target.classList.contains("fa")?(a.target.classList.remove("fa"),a.target.classList.add("far"),e.props.addLike(t)):(e.props.addDislike(t),a.target.classList.add("fa"),a.target.classList.remove("far"))},e.ForEachAllReviews=function(){return e.props.comments[e.props.id].reviews.map((function(t,a){var n=t.name,i=t.comment,r=t.CounterRaiting;return Object(h.jsxs)("div",{className:"Comment",children:[Object(h.jsxs)("div",{className:"Comment2",children:[Object(h.jsx)("h4",{children:n}),Object(h.jsx)("p",{className:"CommentComment",children:i})]}),Object(h.jsx)("div",{className:"Comment2",children:Object(h.jsxs)("div",{className:"verticalFlex",children:[Object(h.jsx)("p",{children:r}),Object(h.jsxs)("div",{className:"LikeAndDislike",children:[Object(h.jsx)("i",{onClick:function(a){return e.addLikeAndClasses(t,a)},className:e.classes.join(" ")}),Object(h.jsx)("i",{onClick:function(a){return e.addDislikeAndClasses(t,a)},className:e.classesForDislike.join(" ")})]})]})})]},a)}))},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{children:this.ForEachAllReviews()})}}]),a}(i.a.Component)),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).addLike=function(t){var a=Object(c.a)(e.props.films[e.props.id].reviews);t.CounterRaiting++,e.setState({reviews:a})},e.addDislike=function(t){var a=Object(c.a)(e.props.films[e.props.id].reviews);t.CounterRaiting--,e.setState({reviews:a})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"Comments  CommentContainer",children:[Object(h.jsx)("h2",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),Object(h.jsx)("form",{action:"#",children:Object(h.jsx)("textarea",{className:"AddNewCommentTextArea",onInput:function(t){return e.props.ChangeInputData(t)},rows:"8",cols:"75",name:"text",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u043c\u043d\u0435\u043d\u0438\u0435 \u043e \u0444\u0438\u043b\u044c\u043c\u0435..."})}),Object(h.jsx)("button",{onClick:function(){return e.props.addNewComment(e.props.id)},className:"redButtonForReviews",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"}),Object(h.jsx)(O,{id:this.props.id,addLike:this.addLike,addDislike:this.addDislike,comments:this.props.films})]})}}]),a}(i.a.Component),C=a(15),k=a.n(C),w=a(20),y=function e(){var t=this;Object(l.a)(this,e),this._apiBaseForItem="https://api.themoviedb.org/3/movie/550?api_key=3c79bfcb56de9dd546762f6bf11c9ae7",this.getResource=function(){var e=Object(w.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/list/".concat(t,"?api_key=3c79bfcb56de9dd546762f6bf11c9ae7&language=ru-RU"));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getList=Object(w.a)(k.a.mark((function e(){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("3");case 2:return a=e.sent,e.next=5,a.items.map((function(e){return t._transformList(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),this._transformList=function(e){return{adult:e.adult,vote:e.vote_average,title:e.title,pathImg:"https://image.tmdb.org/t/p/w500".concat(e.backdrop_path),review:e.overview,date:e.release_date}}},N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={isHovered:!1,modalOpen:!1},e.toggleHover=function(){e.setState((function(e){return{isHovered:!e.isHovered}}))},e.onPlayClick=function(){e.setState((function(e){return{modalOpen:!e.modalOpen}}))},e}return Object(o.a)(a,[{key:"ModalWindowYouTube",value:function(e){var t=this;return Object(h.jsx)("div",{className:"modalYouTube",children:Object(h.jsxs)("div",{className:"containerForYouTube",children:[Object(h.jsx)(g.a,{videoId:"".concat(e),opts:{height:"390",width:"640",playerVars:{autoplay:1}}}),Object(h.jsx)("div",{onClick:function(){return t.setState({modalOpen:!1})},className:"closeModalYouTube",children:"\u2716"})]})})}},{key:"render",value:function(){var e=this.props.films[this.props.film],t=e.midRaiting,a=e.adult,n=e.review,i=e.yearRelease,r=e.name,s=e.img,c=["FilmDetailsImg"];return this.state.isHovered&&c.push("FilmDetailsImgBackground"),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"FilmDetailsMain",children:[this.state.modalOpen?this.ModalWindowYouTube(this.props.films[this.props.film].trailer):null,Object(h.jsxs)("div",{className:"wrapImg",onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,children:[Object(h.jsx)("img",{className:c.join(" "),src:s}),this.state.isHovered?Object(h.jsx)("img",{onClick:this.onPlayClick,className:"playIcon",src:f}):null]}),Object(h.jsxs)("ul",{className:"FilmDetailsList",children:[Object(h.jsxs)("li",{children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",r]}),Object(h.jsxs)("li",{children:["\u0413\u043e\u0434: ",i]}),Object(h.jsxs)("li",{children:["\u0414\u043b\u044f \u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445: ",a?"\u0414\u0430":"\u041d\u0435\u0442"]}),Object(h.jsxs)("li",{children:["\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433: ",t]}),Object(h.jsxs)("li",{children:["\u041e \u0444\u0438\u043b\u044c\u043c\u0435: ",n]}),Object(h.jsx)(v,{id:this.props.film,changeRaiting:this.props.changeRaiting,allFilms:this.props.films})]})]}),Object(h.jsx)("div",{children:Object(h.jsx)(x,{ChangeInputData:this.props.ChangeInputData,addNewComment:this.props.addNewComment,id:this.props.film,films:this.props.films})})]})}}]),a}(i.a.Component),S=a(2),I=(a(59),function(){return Object(h.jsx)("div",{className:"reg",children:Object(h.jsxs)("form",{action:"#",children:[Object(h.jsx)("h1",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(h.jsx)("label",{for:"email",children:"Email"}),Object(h.jsx)("input",{type:"email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email",required:!0}),Object(h.jsx)("label",{for:"psw",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(h.jsx)("input",{type:"password",name:"psw",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0}),Object(h.jsx)("button",{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})}),F=(a(60),function(){return Object(h.jsx)("div",{className:"reg",children:Object(h.jsxs)("form",{action:"#",children:[Object(h.jsx)("h1",{children:"\u0412\u0445\u043e\u0434"}),Object(h.jsx)("label",{for:"email",children:"Email"}),Object(h.jsx)("input",{type:"email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email",required:!0}),Object(h.jsx)("label",{for:"psw",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(h.jsx)("input",{type:"password",name:"psw",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0}),Object(h.jsx)("button",{children:"\u0412\u043e\u0439\u0442\u0438"})]})})}),L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={films:[],searchFilter:"",inputEvent:""},e.updateStateFilms=function(){(new y).getList().then((function(t){console.log("work...");var a=Object(c.a)(e.state.films);t.forEach((function(e){var t={name:e.title,yearRelease:e.date,img:e.pathImg,adult:e.adult,midRaiting:e.vote,review:e.review,trailer:"_-iXjRm3jG0",reviews:[],raiting:0};a.push(t)})),e.setState({films:a})}))},e.addNewComment=function(t){var a=Object(c.a)(e.state.films),n=document.querySelector(".AddNewCommentTextArea");e.state.inputEvent&&a[t].reviews.push({name:"Valdemar293",comment:e.state.inputEvent,CounterRaiting:0}),e.setState({films:a,inputEvent:""}),n.value=""},e.ChangeInputData=function(t){e.setState({inputEvent:t.target.value})},e.changeFilmRaiting=function(t,a){var n=Object(c.a)(e.state.films);n[t].raiting=a,e.setState({films:n})},e.searchHandler=function(t){e.setState({searchFilter:t.target.value})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.updateStateFilms()}},{key:"render",value:function(){var e=this;return Object(h.jsx)(m.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(j,{allFilms:this.state.films}),Object(h.jsx)(p,{searchHandler:this.searchHandler}),Object(h.jsxs)(S.c,{children:[Object(h.jsx)(S.a,{exact:!0,path:"/",render:function(t){return Object(h.jsx)(b,{searchFilter:e.state.searchFilter,renderItems:e.state.films})}}),Object(h.jsx)(S.a,{path:"/join",component:F}),Object(h.jsx)(S.a,{path:"/reg",component:I}),Object(h.jsx)(S.a,{path:"/:id",render:function(t){var a=t.match;return Object(h.jsx)(N,{updateStateFilms:e.updateStateFilms,ChangeInputData:e.ChangeInputData,addNewComment:e.addNewComment,film:a.params.id,changeRaiting:e.changeFilmRaiting,films:e.state.films})}})]})]})})}}]),a}(i.a.Component),R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root")),R()}},[[61,1,2]]]);
//# sourceMappingURL=main.732cbe27.chunk.js.map